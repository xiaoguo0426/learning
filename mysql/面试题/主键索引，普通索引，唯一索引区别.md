在MySQL中，主键索引、普通索引和唯一索引是三种常见的索引类型，它们的区别主要体现在约束条件、唯一性、NULL值允许性、数量限制及性能等方面。以下是详细对比：

---

### **1. 主键索引（PRIMARY KEY）**
- **唯一性约束**：主键索引要求列值**唯一且非空**，每个表只能有一个主键。
- **NULL值**：**不允许**为NULL。
- **数量限制**：每个表**只能有一个**主键索引。
- **存储结构**：主键索引是**聚簇索引**，其叶子节点直接存储数据行本身。
- **使用场景**：用于唯一标识表中的记录（如自增ID）。
- **性能**：查询速度最快，无需回表（数据与索引绑定）。

---

### **2. 唯一索引（UNIQUE INDEX）**
- **唯一性约束**：列值必须**唯一**，但允许存在**NULL值**（MySQL中NULL可重复，部分数据库如SQL Server不允许）。
- **NULL值**：允许NULL（具体是否可重复取决于数据库实现）。
- **数量限制**：一个表可以有**多个**唯一索引。
- **存储结构**：非聚簇索引，叶子节点存储主键值，查询时可能需要回表。
- **使用场景**：业务需要唯一性但非主键的字段（如邮箱、手机号）。
- **性能**：插入/更新时需检查唯一性，速度略慢于普通索引；查询性能接近主键索引。

---

### **3. 普通索引（INDEX / KEY）**
- **唯一性约束**：**无唯一性要求**，允许重复值和NULL。
- **NULL值**：允许NULL，且可重复。
- **数量限制**：一个表可以有多个普通索引。
- **存储结构**：非聚簇索引，叶子节点存储主键值，查询时可能需要回表。
- **使用场景**：加速查询但无需唯一性的字段（如商品分类、状态）。
- **性能**：插入/更新速度较快（无需唯一性检查）；查询时需遍历更多条目。

---

### **关键对比表**
| **特性**            | **主键索引**               | **唯一索引**               | **普通索引**               |
|---------------------|--------------------------|--------------------------|--------------------------|
| **唯一性**          | 唯一且非空               | 唯一（允许NULL）         | 无约束                   |
| **NULL值**          | 不允许                  | 允许（可重复）           | 允许（可重复）           |
| **数量限制**        | 每表仅一个              | 可多个                  | 可多个                  |
| **索引类型**        | 聚簇索引                | 非聚簇索引              | 非聚簇索引              |
| **回表查询**        | 无需                   | 可能需要               | 可能需要               |
| **写入性能**        | 高（无重复检查）        | 中（需唯一性检查）      | 高（无额外检查）        |

---

### **示例说明**
```sql
-- 主键索引（自增ID）
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE,  -- 唯一索引
    name VARCHAR(255),
    INDEX idx_name (name)       -- 普通索引
);
```
- `id` 是主键，唯一且非空。
- `email` 是唯一索引，确保邮箱唯一但允许NULL。
- `name` 是普通索引，加速查询但允许重复。

---

### **性能优化建议**
- **覆盖索引**：若查询字段均在索引中（如`SELECT id FROM users WHERE email='xx'`），唯一索引无需回表。
- **避免过度索引**：索引会占用存储并影响写入性能。
- **选择合适主键**：短且有序的主键（如自增INT）能提升聚簇索引效率。

理解这些区别有助于根据业务需求合理设计索引，平衡查询性能与存储开销。
