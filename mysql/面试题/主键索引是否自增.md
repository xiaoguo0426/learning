在 MySQL 中，**主键索引并不强制要求是自增的**。自增（`AUTO_INCREMENT`）只是主键的一种常见使用方式，但并非必要条件。主键的核心要求是**唯一性**和**非空性**，具体规则如下：

---

### **主键索引的核心要求**
1. **唯一性**：主键列的值必须唯一，不能重复。
2. **非空性**：主键列的值不能为 `NULL`。
3. **单列或多列**：主键可以由单列或多列组合构成（复合主键）。

自增（`AUTO_INCREMENT`）仅仅是为了方便生成唯一且有序的值而设计的特性，并非主键的强制要求。

---

### **为什么自增主键被广泛使用？**
虽然主键不强制自增，但自增主键（如 `INT AUTO_INCREMENT`）有以下优势：
1. **简单高效**：数据库自动生成唯一值，避免手动管理主键冲突。
2. **有序插入**：InnoDB 存储引擎的聚簇索引特性下，自增主键能保证数据按顺序写入，减少页分裂和碎片化，提升插入性能。
3. **空间友好**：整型（如 `INT`/`BIGINT`）占用的存储空间小，索引效率高。

---

### **非自增主键的常见场景**
如果业务需求不适合自增主键，可以选择以下方案：
#### 1. **自然主键（业务主键）**
   - 使用业务中已有的唯一标识作为主键（如身份证号、订单号、ISBN等）。
   - **示例**：
     ```sql
     CREATE TABLE books (
         isbn VARCHAR(13) PRIMARY KEY,  -- 直接使用ISBN作为主键
         title VARCHAR(255)
     );
     ```

#### 2. **UUID 或随机字符串**
   - 适合分布式系统，避免单点生成主键的瓶颈。
   - **缺点**：无序写入会导致聚簇索引频繁分裂，降低插入性能；存储空间较大。
   - **示例**：
     ```sql
     CREATE TABLE distributed_data (
         id CHAR(36) PRIMARY KEY DEFAULT UUID(),  -- 使用UUID作为主键
         content TEXT
     );
     ```

#### 3. **复合主键**
   - 由多个列组合构成唯一标识。
   - **示例**：
     ```sql
     CREATE TABLE order_items (
         order_id INT,
         product_id INT,
         quantity INT,
         PRIMARY KEY (order_id, product_id)  -- 复合主键
     );
     ```

---

### **自增主键 vs 非自增主键对比**
| **特性**                | **自增主键**                          | **非自增主键**                     |
|-------------------------|--------------------------------------|-----------------------------------|
| **唯一性生成**          | 数据库自动生成                       | 需业务层或程序保证                |
| **写入性能**            | 高（有序插入）                       | 可能低（无序插入导致页分裂）      |
| **存储空间**            | 小（通常为整型）                     | 可能大（如UUID为字符串）          |
| **适用场景**            | 单机高并发写入                       | 分布式系统、业务有自然唯一标识    |
| **可读性**              | 无业务意义                           | 可能有业务含义（如订单号）        |

---

### **如何选择主键？**
1. **优先自增主键**：若无特殊需求，使用 `INT/BIGINT AUTO_INCREMENT` 是最简单高效的选择。
2. **分布式场景**：选择雪花算法（Snowflake）、UUID 或数据库中间件生成分布式唯一ID。
3. **业务强约束**：若业务本身有唯一标识（如手机号、身份证号），可直接作为主键，但需确保其不可变。

---

### **示例：非自增主键的表定义**
```sql
-- 使用UUID作为主键
CREATE TABLE users (
    id CHAR(36) PRIMARY KEY DEFAULT UUID(),
    username VARCHAR(50) NOT NULL UNIQUE
);

-- 使用业务字段作为主键
CREATE TABLE citizens (
    id_card_number VARCHAR(18) PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);

-- 复合主键
CREATE TABLE course_registrations (
    student_id INT,
    course_id INT,
    PRIMARY KEY (student_id, course_id)
);
```

---

### **总结**
- 主键的唯一性和非空性是强制要求，但自增（`AUTO_INCREMENT`）只是可选的辅助特性。
- 自增主键在大多数场景下是推荐选择，但在分布式系统或业务有特殊需求时，可使用 UUID、自然键或复合主键。
- 选择主键时需权衡写入性能、存储开销和业务逻辑的合理性。
