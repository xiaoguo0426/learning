### 跨域（Cross-Origin Resource Sharing, CORS）

跨域是指在浏览器环境下，一个网页（或Web应用）尝试从不同的源（域名、协议或端口）加载资源或与之交互时所面临的安全限制。简单来说，当你的前端代码运行在`http://example.com`，而你尝试访问`http://another-domain.com`上的资源时，就会遇到跨域问题。

#### 跨域问题的产生
浏览器出于安全考虑，实施了同源策略（Same-Origin Policy），限制了来自不同源的文档或脚本间的交互能力。例如，当一个网页通过AJAX请求获取另一个域名下的数据时，浏览器会阻止这个请求，除非目标服务器明确允许这种跨域请求。

#### 解决跨域问题的方法
1. **CORS（跨域资源共享）**：这是最常用的方法。服务器通过在响应头中添加`Access-Control-Allow-Origin`等CORS相关头信息，来告诉浏览器允许哪些源可以访问其资源。
    - 例如，服务器响应头中包含`Access-Control-Allow-Origin: *`，表示允许所有源访问其资源。
    - 如果只允许特定的源访问，可以指定具体的源，如`Access-Control-Allow-Origin: http://example.com`。
2. **JSONP（JSON with Padding）**：这是一种较旧的跨域解决方案，主要用于解决GET请求的跨域问题。它通过动态创建script标签来加载跨域的资源，利用script标签的src属性不受同源策略限制的特点。
    - 但JSONP存在一些限制，比如只能发送GET请求，且安全性相对较低。
3. **代理服务器**：在自己的服务器上设置一个代理，前端代码向自己的服务器发送请求，然后由服务器转发请求到目标服务器，并将响应返回给前端。这样，对于前端代码来说，请求的源是相同的，从而避免了跨域问题。
4. **document.domain**：当两个页面的主域名相同时，可以通过设置`document.domain`来使它们属于同一个源，从而绕过同源策略的限制。但这种方法的适用场景有限，且存在一定的安全风险。

### 同源策略（Same-Origin Policy）

同源策略是浏览器的一种安全机制，用于限制来自不同源（Origin）的文档或脚本之间的交互。它确保了用户的安全和隐私，防止恶意网站窃取用户数据。

#### 同源的定义
两个页面具有相同的源，需要满足以下三个条件：
1. **协议（Scheme）**：如`http`、`https`。
2. **主机名（Host）**：如`example.com`。
3. **端口号（Port）**：如`80`（HTTP默认端口）、`443`（HTTPS默认端口）。如果省略端口号，则使用默认端口。

只有当这三个条件完全相同时，才被认为是同源的。例如，`http://example.com`和`http://example.com:80`是同源的，因为它们的协议、主机名和端口号（显式或隐式）都相同；而`http://example.com`和`https://example.com`不是同源的，因为它们的协议不同。

#### 同源策略的限制
1. **DOM操作**：来自不同源的文档不能直接访问彼此的DOM。例如，一个页面不能通过JavaScript直接修改另一个不同源页面的DOM元素。
2. **AJAX请求**：一个页面不能通过XMLHttpRequest或Fetch API向不同源的服务器发送请求，除非目标服务器支持CORS。
3. **Cookie、LocalStorage和SessionStorage**：不同源的页面不能访问彼此的Cookie、LocalStorage和SessionStorage数据。

#### 同源策略的意义
同源策略的主要目的是保护用户的安全和隐私。例如，它防止了恶意网站通过JavaScript访问用户在另一个网站上的敏感信息，如Cookie中的登录凭证。通过限制不同源之间的交互，同源策略大大降低了跨站脚本攻击（XSS）和跨站请求伪造（CSRF）等安全威胁的风险。

### 总结
跨域是由于浏览器的同源策略而产生的问题，它限制了来自不同源的文档或脚本之间的交互。为了解决跨域问题，可以采用CORS、JSONP、代理服务器等方法。同源策略是浏览器的一种安全机制，用于确保用户的安全和隐私，防止恶意网站窃取用户数据。
